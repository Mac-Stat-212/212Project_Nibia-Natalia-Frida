<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Milestone4-Nibia</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Milestone4-Nibia_files/libs/clipboard/clipboard.min.js"></script>
<script src="Milestone4-Nibia_files/libs/quarto-html/quarto.js"></script>
<script src="Milestone4-Nibia_files/libs/quarto-html/popper.min.js"></script>
<script src="Milestone4-Nibia_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Milestone4-Nibia_files/libs/quarto-html/anchor.min.js"></script>
<link href="Milestone4-Nibia_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Milestone4-Nibia_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Milestone4-Nibia_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Milestone4-Nibia_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Milestone4-Nibia_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Milestone4-Nibia</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="packages" class="level2">
<h2 class="anchored" data-anchor-id="packages">Packages</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.4     ✔ tidyr     1.3.1
✔ purrr     1.0.4     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf) <span class="co"># tools for working with spatial vector data (GIS functionality, mapping)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Linking to GEOS 3.11.0, GDAL 3.5.3, PROJ 9.1.0; sf_use_s2() is TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(geobr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="plotting-base-states" class="level2">
<h2 class="anchored" data-anchor-id="plotting-base-states">Plotting base states</h2>
<section id="states" class="level3">
<h3 class="anchored" data-anchor-id="states">States</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read all states</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>states <span class="ot">&lt;-</span> <span class="fu">read_state</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">year =</span> <span class="dv">2010</span>, </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">showProgress =</span> <span class="cn">FALSE</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Using year/date 2010</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#View(states)</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove plot axis</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>no_axis <span class="ot">&lt;-</span> <span class="fu">theme</span>(<span class="at">axis.title=</span><span class="fu">element_blank</span>(),</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">axis.text=</span><span class="fu">element_blank</span>(),</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">axis.ticks=</span><span class="fu">element_blank</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="municipalities" class="level3">
<h3 class="anchored" data-anchor-id="municipalities">Municipalities</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># download municipality geometries</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>muni_sf <span class="ot">&lt;-</span> geobr<span class="sc">::</span><span class="fu">read_municipality</span>(<span class="at">year =</span> <span class="dv">2010</span>,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">showProgress =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Using year/date 2010</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Using year/date 2010</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="tree-cover-loss-data" class="level1">
<h1>Tree Cover Loss Data</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>tree_cover_loss <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"../../data/raw/Brazil_TreeCoverLoss.csv"</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tree_cover_loss)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  country subnational1 subnational2 threshold area_ha extent_2000_ha
1  Brazil         Acre   Acrelândia         0  158571         158571
2  Brazil         Acre   Acrelândia        10  158571         124431
3  Brazil         Acre   Acrelândia        15  158571         123853
4  Brazil         Acre   Acrelândia        20  158571         123228
5  Brazil         Acre   Acrelândia        25  158571         122874
6  Brazil         Acre   Acrelândia        30  158571         122285
  extent_2010_ha gain_2000.2020_ha tc_loss_ha_2001 tc_loss_ha_2002
1         158571               989            4843            3292
2          96208               989            4790            3281
3          94883               989            4786            3279
4          94653               989            4780            3278
5          92928               989            4773            3277
6          92076               989            4768            3276
  tc_loss_ha_2003 tc_loss_ha_2004 tc_loss_ha_2005 tc_loss_ha_2006
1            2658            4686           13505            2533
2            2648            4678           13406            2527
3            2647            4677           13395            2527
4            2646            4676           13385            2525
5            2644            4676           13372            2525
6            2643            4675           13356            2524
  tc_loss_ha_2007 tc_loss_ha_2008 tc_loss_ha_2009 tc_loss_ha_2010
1            1817            4168            2161            2872
2            1817            4132            2155            2868
3            1816            4129            2155            2867
4            1816            4124            2153            2867
5            1816            4122            2153            2867
6            1816            4119            2152            2866
  tc_loss_ha_2011 tc_loss_ha_2012 tc_loss_ha_2013 tc_loss_ha_2014
1            1094            1114            1458            2165
2            1086            1108            1402            2118
3            1085            1107            1398            2116
4            1083            1107            1395            2114
5            1083            1107            1393            2112
6            1082            1106            1390            2110
  tc_loss_ha_2015 tc_loss_ha_2016 tc_loss_ha_2017 tc_loss_ha_2018
1            2203            3489            2776            1785
2            2058            3188            2681            1713
3            2053            3170            2674            1710
4            2047            3154            2666            1706
5            2044            3145            2663            1704
6            2036            3127            2654            1700
  tc_loss_ha_2019 tc_loss_ha_2020 tc_loss_ha_2021 tc_loss_ha_2022
1            2217            1697            3687            3259
2            2158            1635            3367            2959
3            2154            1631            3354            2950
4            2150            1626            3337            2941
5            2148            1624            3331            2936
6            2142            1620            3316            2924
  tc_loss_ha_2023
1            2050
2            1940
3            1934
4            1930
5            1926
6            1921</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>tree_cover_loss <span class="ot">&lt;-</span> tree_cover_loss <span class="sc">%&gt;%</span> <span class="fu">filter</span>(threshold <span class="sc">==</span> <span class="dv">30</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>tree_cover_loss_brazil <span class="ot">&lt;-</span> tree_cover_loss <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>threshold)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tree_cover_loss_brazil)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  country subnational1    subnational2 area_ha extent_2000_ha extent_2010_ha
1  Brazil         Acre      Acrelândia  158571         122285          92076
2  Brazil         Acre    Assis Brazil  289663         284190         281522
3  Brazil         Acre       Brasiléia  437224         376074         355323
4  Brazil         Acre          Bujari  346763         283041         269722
5  Brazil         Acre        Capixaba  173770         126374         112820
6  Brazil         Acre Cruzeiro do Sul  791898         776282         769456
  gain_2000.2020_ha tc_loss_ha_2001 tc_loss_ha_2002 tc_loss_ha_2003
1               989            4768            3276            2643
2               469             678             715             301
3              2372            4477            4410            2634
4              5713            3597            3337            1824
5              1548            2619            5719            1062
6              3284            1998            1923            2158
  tc_loss_ha_2004 tc_loss_ha_2005 tc_loss_ha_2006 tc_loss_ha_2007
1            4675           13356            2524            1816
2             966             716             144             438
3            6129           12094            1413            1824
4            4819           11538            2213            1988
5            2046            3640            1732             616
6            2513            5830            1219            2257
  tc_loss_ha_2008 tc_loss_ha_2009 tc_loss_ha_2010 tc_loss_ha_2011
1            4119            2152            2866            1082
2             201             313             547             245
3            1672            1870            2834            2757
4            2998            1439            2679            2358
5            1032             703            1324            2512
6            2644            2183            1350             883
  tc_loss_ha_2012 tc_loss_ha_2013 tc_loss_ha_2014 tc_loss_ha_2015
1            1106            1390            2110            2036
2             833             442             838             563
3            5342            4970            6049            4374
4            2069            1903            2489            2255
5            1805            1656            1511            1458
6            3476            2561            3404            1526
  tc_loss_ha_2016 tc_loss_ha_2017 tc_loss_ha_2018 tc_loss_ha_2019
1            3127            2654            1700            2142
2             792             826             790            1076
3            6991            9147            8758            8816
4            3382            3710            3825            3123
5            3670            2570            2578            2308
6            4220            4702            3009            3310
  tc_loss_ha_2020 tc_loss_ha_2021 tc_loss_ha_2022 tc_loss_ha_2023
1            1620            3316            2924            1921
2             666             682             601             443
3            7362            8829            8452            3320
4            4522            5150            6192            2891
5            2889            3427            2907            1221
6            3600            5655            5446            3691</code></pre>
</div>
</div>
</section>
<section id="making-loss-over-time" class="level1">
<h1>Making loss over time</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>tree_cover_loss_brazil <span class="ot">&lt;-</span> tree_cover_loss_brazil <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">loss_2000.2020_ha =</span> tc_loss_ha_2001<span class="sc">+</span>tc_loss_ha_2002<span class="sc">+</span>tc_loss_ha_2003<span class="sc">+</span>tc_loss_ha_2004<span class="sc">+</span>tc_loss_ha_2005<span class="sc">+</span>tc_loss_ha_2006<span class="sc">+</span>tc_loss_ha_2007<span class="sc">+</span>tc_loss_ha_2008<span class="sc">+</span>tc_loss_ha_2009<span class="sc">+</span>tc_loss_ha_2010<span class="sc">+</span>tc_loss_ha_2011<span class="sc">+</span>tc_loss_ha_2012<span class="sc">+</span>tc_loss_ha_2013<span class="sc">+</span>tc_loss_ha_2014<span class="sc">+</span>tc_loss_ha_2015<span class="sc">+</span>tc_loss_ha_2016<span class="sc">+</span>tc_loss_ha_2017<span class="sc">+</span>tc_loss_ha_2018<span class="sc">+</span>tc_loss_ha_2019<span class="sc">+</span>tc_loss_ha_2020</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">extent_2020_ha =</span> extent_2000_ha <span class="sc">+</span> (gain_2000<span class="fl">.2020</span>_ha<span class="sc">-</span> loss_2000<span class="fl">.2020</span>_ha) <span class="do">## If the forest was 10 in 2000, and then it gained 3 and then lost 5. It would be 10 + (3-5) = 10-2 = 8</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tree_cover_loss_brazil)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  country subnational1    subnational2 area_ha extent_2000_ha extent_2010_ha
1  Brazil         Acre      Acrelândia  158571         122285          92076
2  Brazil         Acre    Assis Brazil  289663         284190         281522
3  Brazil         Acre       Brasiléia  437224         376074         355323
4  Brazil         Acre          Bujari  346763         283041         269722
5  Brazil         Acre        Capixaba  173770         126374         112820
6  Brazil         Acre Cruzeiro do Sul  791898         776282         769456
  gain_2000.2020_ha tc_loss_ha_2001 tc_loss_ha_2002 tc_loss_ha_2003
1               989            4768            3276            2643
2               469             678             715             301
3              2372            4477            4410            2634
4              5713            3597            3337            1824
5              1548            2619            5719            1062
6              3284            1998            1923            2158
  tc_loss_ha_2004 tc_loss_ha_2005 tc_loss_ha_2006 tc_loss_ha_2007
1            4675           13356            2524            1816
2             966             716             144             438
3            6129           12094            1413            1824
4            4819           11538            2213            1988
5            2046            3640            1732             616
6            2513            5830            1219            2257
  tc_loss_ha_2008 tc_loss_ha_2009 tc_loss_ha_2010 tc_loss_ha_2011
1            4119            2152            2866            1082
2             201             313             547             245
3            1672            1870            2834            2757
4            2998            1439            2679            2358
5            1032             703            1324            2512
6            2644            2183            1350             883
  tc_loss_ha_2012 tc_loss_ha_2013 tc_loss_ha_2014 tc_loss_ha_2015
1            1106            1390            2110            2036
2             833             442             838             563
3            5342            4970            6049            4374
4            2069            1903            2489            2255
5            1805            1656            1511            1458
6            3476            2561            3404            1526
  tc_loss_ha_2016 tc_loss_ha_2017 tc_loss_ha_2018 tc_loss_ha_2019
1            3127            2654            1700            2142
2             792             826             790            1076
3            6991            9147            8758            8816
4            3382            3710            3825            3123
5            3670            2570            2578            2308
6            4220            4702            3009            3310
  tc_loss_ha_2020 tc_loss_ha_2021 tc_loss_ha_2022 tc_loss_ha_2023
1            1620            3316            2924            1921
2             666             682             601             443
3            7362            8829            8452            3320
4            4522            5150            6192            2891
5            2889            3427            2907            1221
6            3600            5655            5446            3691
  loss_2000.2020_ha extent_2020_ha
1             61162          62112
2             12090         272569
3            103923         274523
4             66068         222686
5             43450          84472
6             54766         724800</code></pre>
</div>
</div>
<section id="combining-datasets" class="level2">
<h2 class="anchored" data-anchor-id="combining-datasets">Combining Datasets</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>tree_cover_loss_brazil <span class="ot">&lt;-</span> tree_cover_loss_brazil <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">name_muni =</span> subnational2)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>mapping_BR <span class="ot">&lt;-</span> tree_cover_loss_brazil <span class="sc">%&gt;%</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(muni_sf, <span class="at">by =</span> <span class="st">"name_muni"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in left_join(., muni_sf, by = "name_muni"): Detected an unexpected many-to-many relationship between `x` and `y`.
ℹ Row 16 of `x` matches multiple rows in `y`.
ℹ Row 308 of `y` matches multiple rows in `x`.
ℹ If a many-to-many relationship is expected, set `relationship =
  "many-to-many"` to silence this warning.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mapping_BR)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  country subnational1    subnational2 area_ha extent_2000_ha extent_2010_ha
1  Brazil         Acre      Acrelândia  158571         122285          92076
2  Brazil         Acre    Assis Brazil  289663         284190         281522
3  Brazil         Acre       Brasiléia  437224         376074         355323
4  Brazil         Acre          Bujari  346763         283041         269722
5  Brazil         Acre        Capixaba  173770         126374         112820
6  Brazil         Acre Cruzeiro do Sul  791898         776282         769456
  gain_2000.2020_ha tc_loss_ha_2001 tc_loss_ha_2002 tc_loss_ha_2003
1               989            4768            3276            2643
2               469             678             715             301
3              2372            4477            4410            2634
4              5713            3597            3337            1824
5              1548            2619            5719            1062
6              3284            1998            1923            2158
  tc_loss_ha_2004 tc_loss_ha_2005 tc_loss_ha_2006 tc_loss_ha_2007
1            4675           13356            2524            1816
2             966             716             144             438
3            6129           12094            1413            1824
4            4819           11538            2213            1988
5            2046            3640            1732             616
6            2513            5830            1219            2257
  tc_loss_ha_2008 tc_loss_ha_2009 tc_loss_ha_2010 tc_loss_ha_2011
1            4119            2152            2866            1082
2             201             313             547             245
3            1672            1870            2834            2757
4            2998            1439            2679            2358
5            1032             703            1324            2512
6            2644            2183            1350             883
  tc_loss_ha_2012 tc_loss_ha_2013 tc_loss_ha_2014 tc_loss_ha_2015
1            1106            1390            2110            2036
2             833             442             838             563
3            5342            4970            6049            4374
4            2069            1903            2489            2255
5            1805            1656            1511            1458
6            3476            2561            3404            1526
  tc_loss_ha_2016 tc_loss_ha_2017 tc_loss_ha_2018 tc_loss_ha_2019
1            3127            2654            1700            2142
2             792             826             790            1076
3            6991            9147            8758            8816
4            3382            3710            3825            3123
5            3670            2570            2578            2308
6            4220            4702            3009            3310
  tc_loss_ha_2020 tc_loss_ha_2021 tc_loss_ha_2022 tc_loss_ha_2023
1            1620            3316            2924            1921
2             666             682             601             443
3            7362            8829            8452            3320
4            4522            5150            6192            2891
5            2889            3427            2907            1221
6            3600            5655            5446            3691
  loss_2000.2020_ha extent_2020_ha       name_muni code_muni code_state
1             61162          62112      Acrelândia   1200013         12
2             12090         272569    Assis Brazil        NA       &lt;NA&gt;
3            103923         274523       Brasiléia   1200104         12
4             66068         222686          Bujari   1200138         12
5             43450          84472        Capixaba   1200179         12
6             54766         724800 Cruzeiro do Sul        NA       &lt;NA&gt;
  abbrev_state                           geom
1           AC MULTIPOLYGON (((-67.14117 -...
2         &lt;NA&gt;             MULTIPOLYGON EMPTY
3           AC MULTIPOLYGON (((-69.58835 -...
4           AC MULTIPOLYGON (((-68.31643 -...
5           AC MULTIPOLYGON (((-67.84667 -...
6         &lt;NA&gt;             MULTIPOLYGON EMPTY</code></pre>
</div>
</div>
</section>
</section>
<section id="adjusting-extend-ha-2000-and-2010-to-be-proportional-to-the-sizes-of-the-municipalities" class="level1">
<h1>Adjusting Extend ha 2000 and 2010 to be proportional to the sizes of the municipalities</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>mapping_BR <span class="ot">&lt;-</span> mapping_BR <span class="sc">%&gt;%</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">relative_extent_per_size2000 =</span>  (extent_2000_ha<span class="sc">/</span>area_ha)<span class="sc">*</span><span class="dv">100</span>,</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">relative_extent_per_size2010 =</span>  (extent_2010_ha<span class="sc">/</span>area_ha)<span class="sc">*</span><span class="dv">100</span>,</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">relative_extent_per_size2020 =</span>  (extent_2020_ha<span class="sc">/</span>area_ha)<span class="sc">*</span><span class="dv">100</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>mapping_BR <span class="ot">&lt;-</span> mapping_BR <span class="sc">%&gt;%</span> </span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">relative_change_2000_2010 =</span> relative_extent_per_size2010 <span class="sc">-</span> relative_extent_per_size2000) <span class="sc">%&gt;%</span>  <span class="co">#If it was 10 in 2000, and 12 in 2010, then it would be 12-10 = 2 (positive number), which means that now there is more tree cover loss  </span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">relative_change_2010_2020 =</span> relative_extent_per_size2020 <span class="sc">-</span> relative_extent_per_size2010) <span class="sc">%&gt;%</span>  </span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">relative_change_2000_2020 =</span> relative_extent_per_size2020 <span class="sc">-</span> relative_extent_per_size2000) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>mapping_BR  <span class="ot">&lt;-</span>  mapping_BR  <span class="sc">%&gt;%</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">actualChange =</span> <span class="fu">case_when</span>(</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    relative_change_2000_2020 <span class="sc">&gt;=</span> <span class="dv">11</span> <span class="sc">~</span> <span class="st">"Large proportional gain"</span>,</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    relative_change_2000_2020 <span class="sc">&gt;=</span> <span class="dv">1</span> <span class="sc">&amp;</span> relative_change_2000_2020 <span class="sc">&lt;=</span> <span class="dv">10</span> <span class="sc">~</span> <span class="st">"Slight proportional gain"</span>,</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    relative_change_2000_2020 <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"No proportional gain or loss"</span>,</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    relative_change_2000_2020 <span class="sc">&lt;=</span> <span class="sc">-</span><span class="dv">1</span> <span class="sc">&amp;</span> relative_change_2000_2020 <span class="sc">&gt;=</span> <span class="sc">-</span><span class="dv">10</span> <span class="sc">~</span> <span class="st">"Slight proportional loss"</span>,</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    relative_change_2000_2020 <span class="sc">&lt;=</span> <span class="sc">-</span><span class="dv">11</span> <span class="sc">&amp;</span> relative_change_2000_2020 <span class="sc">&gt;=-</span><span class="dv">20</span> <span class="sc">~</span> <span class="st">"Large proportional loss"</span>,</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    relative_change_2000_2020 <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">20</span> <span class="sc">~</span> <span class="st">"Extremely large proportional loss"</span>, <span class="co"># Adjusted condition</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(relative_change_2000_2020) <span class="sc">~</span> <span class="st">"No data available"</span>,  </span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Other"</span> </span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mapping_BR)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  country subnational1    subnational2 area_ha extent_2000_ha extent_2010_ha
1  Brazil         Acre      Acrelândia  158571         122285          92076
2  Brazil         Acre    Assis Brazil  289663         284190         281522
3  Brazil         Acre       Brasiléia  437224         376074         355323
4  Brazil         Acre          Bujari  346763         283041         269722
5  Brazil         Acre        Capixaba  173770         126374         112820
6  Brazil         Acre Cruzeiro do Sul  791898         776282         769456
  gain_2000.2020_ha tc_loss_ha_2001 tc_loss_ha_2002 tc_loss_ha_2003
1               989            4768            3276            2643
2               469             678             715             301
3              2372            4477            4410            2634
4              5713            3597            3337            1824
5              1548            2619            5719            1062
6              3284            1998            1923            2158
  tc_loss_ha_2004 tc_loss_ha_2005 tc_loss_ha_2006 tc_loss_ha_2007
1            4675           13356            2524            1816
2             966             716             144             438
3            6129           12094            1413            1824
4            4819           11538            2213            1988
5            2046            3640            1732             616
6            2513            5830            1219            2257
  tc_loss_ha_2008 tc_loss_ha_2009 tc_loss_ha_2010 tc_loss_ha_2011
1            4119            2152            2866            1082
2             201             313             547             245
3            1672            1870            2834            2757
4            2998            1439            2679            2358
5            1032             703            1324            2512
6            2644            2183            1350             883
  tc_loss_ha_2012 tc_loss_ha_2013 tc_loss_ha_2014 tc_loss_ha_2015
1            1106            1390            2110            2036
2             833             442             838             563
3            5342            4970            6049            4374
4            2069            1903            2489            2255
5            1805            1656            1511            1458
6            3476            2561            3404            1526
  tc_loss_ha_2016 tc_loss_ha_2017 tc_loss_ha_2018 tc_loss_ha_2019
1            3127            2654            1700            2142
2             792             826             790            1076
3            6991            9147            8758            8816
4            3382            3710            3825            3123
5            3670            2570            2578            2308
6            4220            4702            3009            3310
  tc_loss_ha_2020 tc_loss_ha_2021 tc_loss_ha_2022 tc_loss_ha_2023
1            1620            3316            2924            1921
2             666             682             601             443
3            7362            8829            8452            3320
4            4522            5150            6192            2891
5            2889            3427            2907            1221
6            3600            5655            5446            3691
  loss_2000.2020_ha extent_2020_ha       name_muni code_muni code_state
1             61162          62112      Acrelândia   1200013         12
2             12090         272569    Assis Brazil        NA       &lt;NA&gt;
3            103923         274523       Brasiléia   1200104         12
4             66068         222686          Bujari   1200138         12
5             43450          84472        Capixaba   1200179         12
6             54766         724800 Cruzeiro do Sul        NA       &lt;NA&gt;
  abbrev_state                           geom relative_extent_per_size2000
1           AC MULTIPOLYGON (((-67.14117 -...                     77.11688
2         &lt;NA&gt;             MULTIPOLYGON EMPTY                     98.11056
3           AC MULTIPOLYGON (((-69.58835 -...                     86.01403
4           AC MULTIPOLYGON (((-68.31643 -...                     81.62376
5           AC MULTIPOLYGON (((-67.84667 -...                     72.72487
6         &lt;NA&gt;             MULTIPOLYGON EMPTY                     98.02803
  relative_extent_per_size2010 relative_extent_per_size2020
1                     58.06610                     39.16984
2                     97.18949                     94.09866
3                     81.26795                     62.78772
4                     77.78281                     64.21850
5                     64.92490                     48.61138
6                     97.16605                     91.52694
  relative_change_2000_2010 relative_change_2010_2020 relative_change_2000_2020
1               -19.0507722                -18.896267                -37.947039
2                -0.9210703                 -3.090833                 -4.011903
3                -4.7460798                -18.480230                -23.226310
4                -3.8409519                -13.564308                -17.405260
5                -7.7999655                -16.313518                -24.113483
6                -0.8619797                 -5.639110                 -6.501090
                       actualChange
1 Extremely large proportional loss
2          Slight proportional loss
3 Extremely large proportional loss
4           Large proportional loss
5 Extremely large proportional loss
6          Slight proportional loss</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>mapping_BR  <span class="ot">&lt;-</span>  mapping_BR  <span class="sc">%&gt;%</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">actualChange =</span> <span class="fu">case_when</span>(</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    relative_change_2000_2020 <span class="sc">&gt;=</span> <span class="dv">11</span> <span class="sc">&amp;</span> relative_extent_per_size2000 <span class="sc">&gt;</span> <span class="dv">20</span> <span class="sc">~</span> <span class="st">"Large proportional gain"</span>,</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    relative_change_2000_2020 <span class="sc">&gt;=</span> <span class="dv">1</span> <span class="sc">&amp;</span> relative_change_2000_2020 <span class="sc">&lt;=</span> <span class="dv">10</span> <span class="sc">&amp;</span> relative_extent_per_size2000 <span class="sc">&gt;</span> <span class="dv">20</span> <span class="sc">~</span> <span class="st">"Slight proportional gain"</span>,</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    relative_change_2000_2020 <span class="sc">&gt;=</span> <span class="sc">-</span><span class="dv">1</span> <span class="sc">&amp;</span> relative_change_2000_2020 <span class="sc">&lt;=</span> <span class="dv">1</span> <span class="sc">&amp;</span> relative_extent_per_size2000 <span class="sc">&gt;</span> <span class="dv">20</span> <span class="sc">~</span> <span class="st">"No proportional gain or loss"</span>,</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    relative_change_2000_2020 <span class="sc">&lt;=</span> <span class="sc">-</span><span class="dv">1</span> <span class="sc">&amp;</span> relative_change_2000_2020 <span class="sc">&gt;=</span> <span class="sc">-</span><span class="dv">10</span> <span class="sc">&amp;</span> relative_extent_per_size2000 <span class="sc">&gt;</span> <span class="dv">20</span> <span class="sc">~</span> <span class="st">"Slight proportional loss"</span>,</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    relative_change_2000_2020 <span class="sc">&lt;=</span> <span class="sc">-</span><span class="dv">11</span> <span class="sc">&amp;</span> relative_change_2000_2020 <span class="sc">&gt;=-</span><span class="dv">20</span> <span class="sc">&amp;</span> relative_extent_per_size2000 <span class="sc">&gt;</span> <span class="dv">20</span> <span class="sc">~</span> <span class="st">"Large proportional loss"</span>,</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    relative_change_2000_2020 <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">20</span> <span class="sc">&amp;</span> relative_extent_per_size2000 <span class="sc">&gt;</span> <span class="dv">20</span> <span class="sc">~</span> <span class="st">"Extremely large proportional loss"</span>, </span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    relative_extent_per_size2000 <span class="sc">&lt;</span> <span class="dv">20</span> <span class="sc">~</span> <span class="st">"Less than 30% tree cover in 2000"</span>,</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(relative_change_2000_2020) <span class="sc">~</span> <span class="st">"No data available"</span>, </span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Other"</span> </span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>  ))<span class="sc">%&gt;%</span> </span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">actualChange =</span> <span class="fu">factor</span>(actualChange, </span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>                               <span class="at">levels =</span> <span class="fu">c</span>(</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"Large proportional gain"</span>, </span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"Slight proportional gain"</span>, </span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"No proportional gain or loss"</span>, </span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"Slight proportional loss"</span>, </span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"Large proportional loss"</span>, </span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"Extremely large proportional loss"</span>,</span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"Less than 30% tree cover in 2000"</span>,</span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"No data available"</span>, </span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"Other"</span> </span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>                                 )))</span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>mapping_BR <span class="ot">&lt;-</span> mapping_BR <span class="sc">%&gt;%</span> </span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">factor</span>(actualChange))</span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>custom_colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Large proportional gain"</span> <span class="ot">=</span> <span class="st">"#138030"</span>, <span class="st">"Slight proportional gain"</span> <span class="ot">=</span> <span class="st">"#19a93f"</span>, <span class="st">"No proportional gain or loss"</span> <span class="ot">=</span><span class="st">"#ddb588"</span> , <span class="st">"Slight proportional loss"</span> <span class="ot">=</span>  <span class="st">"#d37d4f"</span>, <span class="st">"Large proportional loss"</span> <span class="ot">=</span> <span class="st">"#985125"</span>, <span class="st">"Extremely large proportional loss"</span> <span class="ot">=</span>  <span class="st">"#623518"</span>,<span class="st">"Less than 20% tree cover in 2000"</span> <span class="ot">=</span> <span class="st">"#9e9e9e"</span>,  <span class="st">"No data available"</span><span class="ot">=</span> <span class="st">"#000000"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="final-extent-change-from-2000-to-2020-for-areas" class="level1">
<h1>Final Extent Change from 2000 to 2020 for areas</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>tree_extent_change_2000_2020_basedOnOGconditions <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> mapping_BR, <span class="fu">aes</span>(<span class="at">fill =</span> actualChange, <span class="at">geometry =</span> geom),  <span class="at">lwd =</span> <span class="fl">0.02</span>) <span class="sc">+</span> </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> custom_colors, <span class="at">name =</span> <span class="st">"Gain or loss (%)"</span>) <span class="sc">+</span> </span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Brazil Tree Cover Extent Change from 2000-2020 by municipality"</span>, <span class="at">subtitle =</span> <span class="st">"Change only for municipalities with more than 20% tree cover in 2000"</span>) <span class="sc">+</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>tree_extent_change_2000_2020_basedOnOGconditions</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Milestone4-Nibia_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>What is the visualization showing?</strong> Tree Cover Extend Change, but with discrete levels that reduce the levels and therefore it is less confusing than when seeing a gradient.</p>
<p><strong>What are the main insights from this visualization?</strong> When overlapping this map with the bounds on the protected areas and the Amazon Tropical forest, we found that the areas under “Extreme large proportional loss” belong to the buffer zone of protected areas. These are vulnerable regions to illegal logging depending on the enforcement of the environmental laws (which could depend with whoever is in charge).</p>
<p><strong>What are the limitations of this visualization?</strong> The are many regions missing from our dataset. We need to show the bounds of the protected areas and investigate further those municipalities that had tree cover extend gain.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>